"use strict";(self["webpackChunkdrgs"]=self["webpackChunkdrgs"]||[]).push([[4535],{1166:function(e,t,l){l.r(t),l.d(t,{default:function(){return M}});var a=l(6252),i=l(3577),n=l(5080);const s=e=>((0,a.dD)("data-v-4a66e296"),e=e(),(0,a.Cn)(),e),o={class:"login_bg"},c={class:"login_adv"},d={class:"login_adv__title"},u=s((()=>(0,a._)("h2",null,"H4L",-1))),g=s((()=>(0,a._)("div",{class:"login_adv__mask"},null,-1))),r={class:"login_adv__bottom"},h={class:"login_main"},m={class:"login_config"},_=s((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},[(0,a._)("path",{d:"M478.33 433.6l-90-218a22 22 0 0 0-40.67 0l-90 218a22 22 0 1 0 40.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 0 0 458 464a22 22 0 0 0 20.32-30.4zM334.83 362L368 281.65L401.17 362z",fill:"currentColor"}),(0,a._)("path",{d:"M267.84 342.92a22 22 0 0 0-4.89-30.7c-.2-.15-15-11.13-36.49-34.73c39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 0 0 0-44H214V70a22 22 0 0 0-44 0v20H54a22 22 0 0 0 0 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36c-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 0 0-40.58 17c.58 1.38 14.55 34.23 52.86 83.93c.92 1.19 1.83 2.35 2.74 3.51c-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1 0 21.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59c22.52 24.08 38 35.44 38.93 36.1a22 22 0 0 0 30.75-4.9z",fill:"currentColor"})],-1))),w={class:"login-form"},p={class:"login-header"},O={class:"logo"},L=["alt"],$={class:"login-oauth"},f={class:"qrCodeLogin"},v={class:"msg"},S=s((()=>(0,a._)("br",null,null,-1))),W={key:0,class:"qrCodeLogin-result"};function k(e,t,l,s,k,C){const I=(0,a.up)("el-icon-help"),T=(0,a.up)("el-icon"),N=(0,a.up)("el-icon-plus"),A=(0,a.up)("el-icon-menu"),M=(0,a.up)("el-button"),b=(0,a.up)("el-dropdown-item"),E=(0,a.up)("el-dropdown-menu"),P=(0,a.up)("el-dropdown"),G=(0,a.up)("password-form"),R=(0,a.up)("el-tab-pane"),U=(0,a.up)("phone-form"),D=(0,a.up)("el-tabs"),F=(0,a.up)("el-divider"),z=(0,a.up)("sc-qr-code"),y=(0,a.up)("el-result"),H=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a._)("div",c,[(0,a._)("div",d,[u,(0,a._)("h4",null,(0,i.zw)(e.$t("login.slogan")),1),(0,a._)("p",null,(0,i.zw)(e.$t("login.describe")),1),(0,a._)("div",null,[(0,a._)("span",null,[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I)])),_:1})]),(0,a._)("span",null,[(0,a.Wm)(T,{class:"add"},{default:(0,a.w5)((()=>[(0,a.Wm)(N)])),_:1})]),(0,a._)("span",null,[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A)])),_:1})])])]),g,(0,a._)("div",r," © "+(0,i.zw)(e.$CONFIG.APP_NAME)+" "+(0,i.zw)(e.$CONFIG.APP_VER),1)]),(0,a._)("div",h,[(0,a._)("div",m,[(0,a.Wm)(M,{icon:k.config.dark?"el-icon-sunny":"el-icon-moon",circle:"",type:"info",onClick:C.configDark},null,8,["icon","onClick"]),(0,a.Wm)(P,{trigger:"click",placement:"bottom-end",onCommand:C.configLang},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.lang,(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.value,command:e,class:(0,i.C_)({selected:k.config.lang==e.value})},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.name),1)])),_:2},1032,["command","class"])))),128))])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(M,{circle:""},{default:(0,a.w5)((()=>[_])),_:1})])),_:1},8,["onCommand"])]),(0,a._)("div",w,[(0,a._)("div",p,[(0,a._)("div",O,[(0,a._)("img",{alt:e.$CONFIG.APP_NAME,src:n},null,8,L),(0,a._)("label",null,(0,i.zw)(e.$CONFIG.APP_NAME),1)])]),(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:e.$t("login.accountLogin"),lazy:""},{default:(0,a.w5)((()=>[(0,a.Wm)(G)])),_:1},8,["label"]),(0,a.Wm)(R,{label:e.$t("login.mobileLogin"),lazy:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U)])),_:1},8,["label"])])),_:1}),e.$CONFIG.MY_SHOW_LOGIN_OAUTH?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("login.signInOther")),1)])),_:1}),(0,a._)("div",$,[(0,a.Wm)(M,{type:"success",icon:"sc-icon-wechat",circle:"",onClick:C.wechatLogin},null,8,["onClick"])])],64)):(0,a.kq)("",!0)])])]),(0,a.Wm)(H,{modelValue:k.showWechatLogin,"onUpdate:modelValue":t[0]||(t[0]=e=>k.showWechatLogin=e),title:e.$t("login.wechatLoginTitle"),width:400,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a.Wm)(z,{class:"qrCode",text:k.WechatLoginCode,size:200},null,8,["text"]),(0,a._)("p",v,[(0,a.Uk)((0,i.zw)(e.$tc("login.wechatLoginMsg",1)),1),S,(0,a.Uk)((0,i.zw)(e.$tc("login.wechatLoginMsg",2)),1)]),k.isWechatLoginResult?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(y,{icon:"success",title:e.$tc("login.wechatLoginResult",1),"sub-title":e.$tc("login.wechatLoginResult",2)},null,8,["title","sub-title"])])):(0,a.kq)("",!0)])])),_:1},8,["modelValue","title"])],64)}var C=l(7899),I=l(6926),T={components:{passwordForm:C["default"],phoneForm:I["default"]},data(){return{config:{lang:this.$TOOL.data.get("APP_LANG")||this.$CONFIG.LANG,dark:this.$TOOL.data.get("APP_DARK")||!1},lang:[{name:"简体中文",value:"zh-cn"},{name:"English",value:"en"}],WechatLoginCode:"",showWechatLogin:!1,isWechatLoginResult:!1}},watch:{"config.dark"(e){e?(document.documentElement.classList.add("dark"),this.$TOOL.data.set("APP_DARK",e)):(document.documentElement.classList.remove("dark"),this.$TOOL.data.remove("APP_DARK"))},"config.lang"(e){this.$i18n.locale=e,this.$TOOL.data.set("APP_LANG",e)}},created:function(){this.$TOOL.data.remove(this.$CONFIG.SUB_SYSTEM+"_USER_INFO"),this.$TOOL.data.remove(this.$CONFIG.SUB_SYSTEM+"_MENU"),this.$TOOL.data.remove(this.$CONFIG.SUB_SYSTEM+"_PERMISSIONS"),this.$TOOL.data.remove("DASHBOARDGRID"),this.$TOOL.data.remove("grid"),this.$store.commit("clearViewTags"),this.$store.commit("clearKeepLive"),this.$store.commit("clearIframeList"),console.log("%c H4L %c Web: https://h4l.cn","background:#666;color:#fff;border-radius:3px;",""),this.$TOOL.cookie.get("TOKEN")&&this.get_menu()},methods:{async get_menu(){let e=null;return e=await this.$API.system.menu.myMenus.get(),200!==e.code?(this.islogin=!1,this.$message.warning(e.message),!1):0===e.data.menu.length?(this.islogin=!1,this.$alert("当前用户无任何菜单权限，请联系系统管理员","无权限访问",{type:"error",center:!0}),!1):(this.$TOOL.data.set(this.$CONFIG.SUB_SYSTEM+"_USER_INFO",e.data.userInfo),this.$TOOL.data.set(this.$CONFIG.SUB_SYSTEM+"_MENU",e.data.menu),this.$TOOL.data.set(this.$CONFIG.SUB_SYSTEM+"_PERMISSIONS",e.data.permissions),this.$TOOL.data.set(this.$CONFIG.SUB_SYSTEM+"_DASHBOARDGRID",e.data.dashboardGrid),this.$router.replace({path:"/"}),this.$message.success("Login Success 登录成功"),void(this.islogin=!1))},configDark(){this.config.dark=!this.config.dark},configLang(e){this.config.lang=e.value},wechatLogin(){this.showWechatLogin=!0,this.WechatLoginCode="SCUI-823677237287236-"+(new Date).getTime(),this.isWechatLoginResult=!1,setTimeout((()=>{this.isWechatLoginResult=!0}),3e3)}}},N=l(3744);const A=(0,N.Z)(T,[["render",k],["__scopeId","data-v-4a66e296"]]);var M=A}}]);