"use strict";(self["webpackChunkdrgs"]=self["webpackChunkdrgs"]||[]).push([[165],{5889:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var l=t(6252),i=t(3577);const d={class:"custom-tree-node"},s={class:"label"},n={class:"code"},o={class:"left-panel"},r={class:"block"};function c(e,a,t,c,p,u){const h=(0,l.up)("el-input"),g=(0,l.up)("el-header"),m=(0,l.up)("el-tree"),w=(0,l.up)("el-main"),f=(0,l.up)("el-container"),b=(0,l.up)("el-aside"),_=(0,l.up)("el-date-picker"),W=(0,l.up)("el-button"),D=(0,l.up)("el-table-column"),k=(0,l.up)("scTable"),y=(0,l.up)("dic-dialog"),C=(0,l.up)("list-dialog"),v=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(b,{width:"300px"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{placeholder:"输入关键字进行过滤",modelValue:p.dicFilterText,"onUpdate:modelValue":a[0]||(a[0]=e=>p.dicFilterText=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(w,{class:"nopadding"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{ref:"dic",class:"menu","node-key":"id",data:p.dicList,props:p.dicProps,"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":u.dicFilterNode,onNodeClick:u.dicClick},{default:(0,l.w5)((({node:e,data:a})=>[(0,l._)("span",d,[(0,l._)("span",s,(0,i.zw)(e.label),1),(0,l._)("span",n,(0,i.zw)(a.code),1)])])),_:1},8,["data","props","filter-node-method","onNodeClick"])])),_:1})])),_:1})])),_:1})),[[v,p.showDicloading]]),(0,l.Wm)(f,{class:"is-vertical"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",r,[(0,l.Wm)(_,{modelValue:p.data_range,"onUpdate:modelValue":a[1]||(a[1]=e=>p.data_range=e),format:"YYYY年MM月DD日","value-format":"YYYY-MM-DD",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),(0,l.Uk)("     "),(0,l.Wm)(W,{type:"primary",icon:"el-icon-search",onClick:a[2]||(a[2]=e=>this.$refs.table.refresh())})])])),_:1}),(0,l.Wm)(w,{class:"nopadding"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{ref:"table",apiObj:p.listApi,"row-key":"id",params:p.listApiParams,onSelectionChange:e.selectionChange,hidePagination:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{label:"住院号码",prop:"住院号码",width:"85"}),(0,l.Wm)(D,{label:"姓名",prop:"姓名",width:"80"}),(0,l.Wm)(D,{label:"身份证号",prop:"身份证号",width:"155"}),(0,l.Wm)(D,{label:"年龄",prop:"年龄",width:"60"}),(0,l.Wm)(D,{label:"入院科别",prop:"入院科别",width:"150"}),(0,l.Wm)(D,{label:"出院主要诊断编码",prop:"出院主要诊断编码",width:"100"}),(0,l.Wm)(D,{label:"出院主要诊断名称",prop:"出院主要诊断名称",width:"150"}),(0,l.Wm)(D,{label:"出院诊断疾病编码1",prop:"出院诊断疾病编码1",width:"100"}),(0,l.Wm)(D,{label:"出院诊断其他诊断1",prop:"出院诊断其他诊断1",width:"150"}),(0,l.Wm)(D,{label:"主要手术操作编码",prop:"主要手术操作编码",width:"100"}),(0,l.Wm)(D,{label:"主要手术操作名称",prop:"主要手术操作名称",width:"150"}),(0,l.Wm)(D,{label:"住院天数",prop:"住院天数",width:"60"}),(0,l.Wm)(D,{label:"总费用",prop:"总费用",width:"100"}),(0,l.Wm)(D,{label:"离院方式",prop:"离院方式",width:"60"})])),_:1},8,["apiObj","params","onSelectionChange"])])),_:1})])),_:1})])),_:1}),p.dialog.dic?((0,l.wg)(),(0,l.j4)(y,{key:0,ref:"dicDialog",onSuccess:e.handleDicSuccess,onClosed:a[3]||(a[3]=e=>p.dialog.dic=!1)},null,8,["onSuccess"])):(0,l.kq)("",!0),p.dialog.list?((0,l.wg)(),(0,l.j4)(C,{key:1,ref:"listDialog",onSuccess:e.handleListSuccess,onClosed:a[4]||(a[4]=e=>p.dialog.list=!1)},null,8,["onSuccess"])):(0,l.kq)("",!0)],64)}var p=t(2423),u=t(2247),h={name:"drgs",components:{dicDialog:p["default"],listDialog:u["default"]},data(){return{dialog:{dic:!1,info:!1},data_range:"",showDicloading:!0,dicList:[],dicFilterText:"",dicProps:{label:"label"},listApi:null,listApiParams:{},selection:[]}},watch:{dicFilterText(e){this.$refs.dic.filter(e)}},mounted(){this.data_range=[this.getFirstDay(),this.getLastDay()],this.getDic()},methods:{getFirstDay(){const e=(new Date).getFullYear();let a=(new Date).getMonth()+1;const t="01";return a=a<10?"0"+a:a,[e,a,t].join("-")},getLastDay(){const e=(new Date).getFullYear();let a=(new Date).getMonth()+1,t=new Date(e,a,0).getDate();return a=a<10?"0"+a:a,t=t<10?"0"+t:t,[e,a,t].join("-")},async getDic(){var e=await this.$API.drgs.list.get();this.showDicloading=!1,this.dicList=e.data.rows;var a=this.dicList[0];a&&(this.$nextTick((()=>{this.$refs.dic.setCurrentKey(a.id)})),this.listApiParams={id:a.id,start_date:this.data_range[0],end_date:this.data_range[1]},this.listApi=this.$API.drgs.details)},dicFilterNode(e,a){if(!e)return!0;var t=a.name+a.code;return-1!==t.indexOf(e)},dicClick(e){this.$refs.table.reload({id:e.id,start_date:this.data_range[0],end_date:this.data_range[1]})}}},g=t(3744);const m=(0,g.Z)(h,[["render",c],["__scopeId","data-v-619061a2"]]);var w=m}}]);